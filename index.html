<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>گاه‌شماری چندگانه - Multi Calendar</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Vazirmatn:wght@300;400;500;600;700;800&display=swap");

      :root {
        --bg-primary: #0a0a0f;
        --bg-secondary: #111118;
        --bg-tertiary: #1a1a24;
        --accent-primary: #00d4ff;
        --accent-secondary: #7c3aed;
        --accent-gold: #fbbf24;
        --text-primary: #ffffff;
        --text-secondary: #a1a1aa;
        --text-muted: #71717a;
        --border-primary: rgba(255, 255, 255, 0.1);
        --border-accent: rgba(0, 212, 255, 0.3);
        --gradient-primary: linear-gradient(135deg, #00d4ff 0%, #7c3aed 100%);
        --gradient-secondary: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
        --gradient-bg: linear-gradient(
          135deg,
          #0a0a0f 0%,
          #111118 50%,
          #1a1a24 100%
        );
        --shadow-primary: 0 25px 50px -12px rgba(0, 0, 0, 0.8);
        --shadow-accent: 0 0 50px rgba(0, 212, 255, 0.3);
        --blur-bg: blur(20px);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", "Vazirmatn", -apple-system, BlinkMacSystemFont,
          sans-serif;
        background: var(--gradient-bg);
        color: var(--text-primary);
        line-height: 1.6;
        overflow-x: hidden;
        min-height: 100vh;
      }

      .bg-animation {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -2;
        background: radial-gradient(
            circle at 20% 20%,
            rgba(0, 212, 255, 0.1) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 80%,
            rgba(124, 58, 237, 0.1) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 60%,
            rgba(251, 191, 36, 0.05) 0%,
            transparent 50%
          );
        animation: backgroundShift 20s ease-in-out infinite;
      }

      @keyframes backgroundShift {
        0%,
        100% {
          transform: scale(1) rotate(0deg);
        }
        50% {
          transform: scale(1.1) rotate(2deg);
        }
      }

      .particles {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        pointer-events: none;
      }

      .particle {
        position: absolute;
        width: 2px;
        height: 2px;
        background: var(--accent-primary);
        border-radius: 50%;
        animation: float 15s linear infinite;
        opacity: 0.6;
      }

      @keyframes float {
        0% {
          transform: translateY(100vh) translateX(0);
          opacity: 0;
        }
        10% {
          opacity: 0.6;
        }
        90% {
          opacity: 0.6;
        }
        100% {
          transform: translateY(-100px) translateX(100px);
          opacity: 0;
        }
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 2rem;
      }

      .header {
        text-align: center;
        margin-bottom: 4rem;
        position: relative;
      }

      .logo {
        width: 80px;
        height: 45px;
        margin: 0 auto 2rem;
        background: var(--gradient-primary);
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        box-shadow: var(--shadow-accent);
        animation: logoFloat 6s ease-in-out infinite;
        position: relative;
        overflow: hidden;
      }

      .logo::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
          45deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        animation: shimmer 3s linear infinite;
      }

      @keyframes logoFloat {
        0%,
        100% {
          transform: translateY(0) rotate(0deg);
        }
        50% {
          transform: translateY(-10px) rotate(5deg);
        }
      }

      @keyframes shimmer {
        0% {
          transform: translateX(-100%) translateY(-100%) rotate(45deg);
        }
        100% {
          transform: translateX(100%) translateY(100%) rotate(45deg);
        }
      }

      .title {
        font-size: clamp(2.5rem, 5vw, 4rem);
        font-weight: 800;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 1rem;
        letter-spacing: -0.02em;
      }

      .subtitle {
        font-size: 1.25rem;
        color: var(--text-secondary);
        font-weight: 400;
        margin-bottom: 0.5rem;
      }

      .description {
        font-size: 1rem;
        color: var(--text-muted);
        max-width: 600px;
        margin: 0 auto;
      }

      .calendar-card {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: var(--blur-bg);
        border: 1px solid var(--border-primary);
        border-radius: 24px;
        padding: 3rem;
        margin-bottom: 3rem;
        box-shadow: var(--shadow-primary);
        position: relative;
        overflow: hidden;
      }

      .calendar-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: var(--gradient-primary);
        opacity: 0.5;
      }

      .nav-tabs {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 3rem;
        padding: 0.5rem;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 16px;
        backdrop-filter: var(--blur-bg);
        justify-content: center;
        flex-wrap: wrap;
      }

      .nav-tab {
        background: transparent;
        border: none;
        color: var(--text-secondary);
        padding: 1rem 1.5rem;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        font-family: inherit;
        font-size: 0.95rem;
        font-weight: 500;
        position: relative;
        overflow: hidden;
      }

      .nav-tab::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--gradient-primary);
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: -1;
      }

      .nav-tab:hover {
        color: var(--text-primary);
        transform: translateY(-2px);
      }

      .nav-tab:hover::before {
        opacity: 0.1;
      }

      .nav-tab.active {
        background: var(--gradient-primary);
        color: var(--text-primary);
        box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
      }

      .nav-tab.active::before {
        opacity: 1;
      }

      .date-display {
        text-align: center;
        margin-bottom: 3rem;
      }

      .current-date {
        font-size: clamp(2rem, 4vw, 3.5rem);
        font-weight: 700;
        background: var(--gradient-secondary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 1rem;
        line-height: 1.2;
      }

      .date-numeric {
        font-size: 1.2rem;
        color: var(--text-muted);
        font-weight: 500;
        margin-bottom: 1rem;
        font-family: "Inter", monospace;
      }

      .date-info {
        font-size: 1.1rem;
        color: var(--text-secondary);
        margin-bottom: 0.5rem;
      }

      .day-name {
        font-size: 1rem;
        color: var(--text-muted);
      }

      .info-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        background: rgba(251, 191, 36, 0.1);
        border: 1px solid rgba(251, 191, 36, 0.2);
        color: var(--accent-gold);
        padding: 1rem 1.5rem;
        border-radius: 12px;
        font-size: 0.9rem;
        font-weight: 500;
        margin: 2rem 0;
        backdrop-filter: var(--blur-bg);
        text-align: center;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }

      .converter {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: var(--blur-bg);
        border: 1px solid var(--border-primary);
        border-radius: 24px;
        padding: 3rem;
        box-shadow: var(--shadow-primary);
        position: relative;
        overflow: hidden;
      }

      .converter::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: var(--gradient-secondary);
        opacity: 0.5;
      }

      .converter-title {
        font-size: 1.75rem;
        font-weight: 700;
        text-align: center;
        margin-bottom: 2rem;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .input-group {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        align-items: end;
        justify-content: center;
        flex-wrap: wrap;
      }

      .input-field {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .input-label {
        font-size: 0.875rem;
        color: var(--text-secondary);
        font-weight: 500;
      }

      .input {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--border-primary);
        color: var(--text-primary);
        padding: 1rem;
        border-radius: 12px;
        font-family: inherit;
        font-size: 1rem;
        width: 100px;
        text-align: center;
        transition: all 0.3s ease;
        backdrop-filter: var(--blur-bg);
      }

      .input:focus {
        outline: none;
        border-color: var(--accent-primary);
        box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
        background: rgba(255, 255, 255, 0.08);
      }

      .select {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--border-primary);
        color: var(--text-primary);
        padding: 1rem;
        border-radius: 12px;
        font-family: inherit;
        font-size: 1rem;
        width: 180px;
        cursor: pointer;
        backdrop-filter: var(--blur-bg);
        transition: all 0.3s ease;
      }

      .select:focus {
        outline: none;
        border-color: var(--accent-primary);
        box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
      }

      .convert-btn {
        background: var(--gradient-primary);
        border: none;
        color: var(--text-primary);
        padding: 1rem 2rem;
        border-radius: 12px;
        font-family: inherit;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
        position: relative;
        overflow: hidden;
      }

      .convert-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s ease;
      }

      .convert-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 35px rgba(0, 212, 255, 0.4);
      }

      .convert-btn:hover::before {
        left: 100%;
      }

      .convert-btn:active {
        transform: translateY(0);
      }

      .results-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        margin-top: 2rem;
      }

      .result-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid var(--border-primary);
        border-radius: 16px;
        padding: 2rem;
        text-align: center;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        backdrop-filter: var(--blur-bg);
        position: relative;
        overflow: hidden;
      }

      .result-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--gradient-primary);
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: -1;
      }

      .result-card:hover {
        transform: translateY(-4px);
        border-color: var(--accent-primary);
        box-shadow: 0 20px 40px rgba(0, 212, 255, 0.2);
      }

      .result-card:hover::before {
        opacity: 0.05;
      }

      .result-title {
        font-size: 0.875rem;
        color: var(--text-secondary);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 1rem;
      }

      .result-date {
        font-size: 1.25rem;
        color: var(--text-primary);
        font-weight: 600;
        line-height: 1.4;
        margin-bottom: 0.5rem;
      }

      .result-numeric {
        font-size: 1rem;
        color: var(--text-muted);
        font-family: "Inter", monospace;
      }

      .time-difference {
        background: rgba(124, 58, 237, 0.1);
        border: 1px solid rgba(124, 58, 237, 0.2);
        border-radius: 12px;
        padding: 1.5rem;
        margin-top: 2rem;
        text-align: center;
      }

      .time-diff-title {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--accent-secondary);
        margin-bottom: 1rem;
      }

      .time-diff-content {
        font-size: 1rem;
        color: var(--text-primary);
        line-height: 1.5;
      }

      .time-diff-future {
        color: var(--accent-primary);
      }

      .time-diff-past {
        color: var(--accent-gold);
      }

      .status-indicator {
        position: fixed;
        top: 2rem;
        left: 2rem;
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: var(--blur-bg);
        border: 1px solid var(--border-primary);
        color: var(--text-primary);
        padding: 0.75rem 1rem;
        border-radius: 50px;
        font-size: 0.875rem;
        font-weight: 500;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .status-dot {
        width: 8px;
        height: 8px;
        background: var(--accent-primary);
        border-radius: 50%;
        animation: pulse 2s ease-in-out infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      @media (max-width: 768px) {
        .container {
          padding: 1rem;
        }
        .calendar-card,
        .converter {
          padding: 2rem;
        }
        .input-group {
          flex-direction: column;
          align-items: center;
        }
        .input,
        .select {
          width: 200px;
        }
        .nav-tabs {
          flex-direction: column;
        }
        .status-indicator {
          position: relative;
          top: 0;
          left: 0;
          margin-bottom: 2rem;
        }
      }

      .persian-num {
        font-feature-settings: "tnum";
        font-variant-numeric: tabular-nums;
      }

      .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 2px solid var(--border-primary);
        border-radius: 50%;
        border-top-color: var(--accent-primary);
        animation: spin 1s ease-in-out infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <div class="bg-animation"></div>

    <div class="particles" id="particles"></div>

    <div class="status-indicator">
      <div class="status-dot"></div>
      <span id="statusText">گاه‌شماری فعال</span>
    </div>

    <div class="container">
      <header class="header">
        <div class="logo">
          <img src="iran.svg" alt="Multi Calendar Logo" />
        </div>
        <h1 class="title">گاه‌شماری چندگانه</h1>
        <p class="subtitle">Multi Calendar System</p>
        <p class="description">
          سیستم پیشرفته تبدیل و نمایش تاریخ بر اساس انواع تقویم‌ها
        </p>
      </header>

      <div class="calendar-card">
        <div class="nav-tabs">
          <button class="nav-tab active" onclick="switchCalendar('imperial')">
            شاهنشاهی
          </button>
          <button class="nav-tab" onclick="switchCalendar('persian')">
            خورشیدی
          </button>
          <button class="nav-tab" onclick="switchCalendar('hijri')">
            هجری قمری
          </button>
          <button class="nav-tab" onclick="switchCalendar('gregorian')">
            میلادی
          </button>
          <button class="nav-tab" onclick="switchCalendar('chinese')">
            چینی
          </button>
          <button class="nav-tab" onclick="switchCalendar('hebrew')">
            عبری
          </button>
          <button class="nav-tab" onclick="switchCalendar('unix')">
            یونیکس
          </button>
        </div>

        <div class="date-display">
          <div class="current-date persian-num" id="currentDate">
            <div class="loading"></div>
          </div>
          <div class="date-numeric" id="dateNumeric"></div>
          <div class="date-info" id="dateInfo">در حال بارگذاری...</div>
          <div class="day-name" id="dayName"></div>
          <div class="current-time persian-num" id="currentTime"></div>
        </div>

        <div class="info-badge">
          <span>ℹ️</span>
          <span id="calendarDescription"></span>
        </div>
      </div>

      <div class="converter">
        <h2 class="converter-title">تبدیل تاریخ</h2>

        <div class="input-group">
          <div class="input-field" id="yearField">
            <label class="input-label">سال</label>
            <input
              type="number"
              class="input"
              id="inputYear"
              placeholder="1403"
              min="1"
              max="9999"
            />
          </div>
          <div class="input-field" id="monthField">
            <label class="input-label">ماه</label>
            <input
              type="number"
              class="input"
              id="inputMonth"
              placeholder="12"
              min="1"
              max="12"
            />
          </div>
          <div class="input-field" id="dayField">
            <label class="input-label">روز</label>
            <input
              type="number"
              class="input"
              id="inputDay"
              placeholder="15"
              min="1"
              max="31"
            />
          </div>
          <div class="input-field" id="timestampField" style="display: none">
            <label class="input-label">یونیکس تایم‌استمپ</label>
            <input
              type="number"
              class="input"
              id="inputTimestamp"
              placeholder="1697059200"
              style="width: 150px"
            />
          </div>
          <div class="input-field">
            <label class="input-label">نوع تقویم</label>
            <select
              class="select"
              id="inputCalendar"
              onchange="toggleInputFields()"
            >
              <option value="imperial">شاهنشاهی</option>
              <option value="persian">خورشیدی</option>
              <option value="hijri">هجری قمری</option>
              <option value="gregorian">میلادی</option>
              <option value="chinese">چینی</option>
              <option value="hebrew">عبری</option>
              <option value="unix">یونیکس تایم‌استمپ</option>
            </select>
          </div>
          <div class="input-field">
            <button class="convert-btn" onclick="convertDate()">تبدیل</button>
          </div>
        </div>

        <div class="results-grid" id="conversionResults"></div>
        <div
          class="time-difference"
          id="timeDifference"
          style="display: none"
        ></div>
      </div>
    </div>

    <script>
      // Persian month names
      const persianMonths = [
        "فروردین",
        "اردیبهشت",
        "خرداد",
        "تیر",
        "مرداد",
        "شهریور",
        "مهر",
        "آبان",
        "آذر",
        "دی",
        "بهمن",
        "اسفند",
      ];

      const hijriMonths = [
        "محرم",
        "صفر",
        "ربیع الاول",
        "ربیع الثانی",
        "جمادی الاول",
        "جمادی الثانی",
        "رجب",
        "شعبان",
        "رمضان",
        "شوال",
        "ذی القعده",
        "ذی الحجه",
      ];

      const gregorianMonths = [
        "ژانویه",
        "فوریه",
        "مارس",
        "آپریل",
        "مه",
        "ژوئن",
        "ژوئیه",
        "اوت",
        "سپتامبر",
        "اکتبر",
        "نوامبر",
        "دسامبر",
      ];

      const gregorianMonthsEnglish = [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
      ];

      const chineseMonths = [
        "ماه اول",
        "ماه دوم",
        "ماه سوم",
        "ماه چهارم",
        "ماه پنجم",
        "ماه ششم",
        "ماه هفتم",
        "ماه هشتم",
        "ماه نهم",
        "ماه دهم",
        "ماه یازدهم",
        "ماه دوازدهم",
      ];

      const hebrewMonths = [
        "تشرین",
        "حشوان",
        "کسلیو",
        "طوت",
        "شباط",
        "آدار اول",
        "آدار دوم",
        "نیسان",
        "ایار",
        "سیوان",
        "تموز",
        "آو",
        "ایلول",
      ];

      const persianDays = [
        "شنبه",
        "یکشنبه",
        "دوشنبه",
        "سه‌شنبه",
        "چهارشنبه",
        "پنج‌شنبه",
        "جمعه",
      ];

      const englishDays = [
        "Saturday",
        "Sunday",
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
      ];

      let currentCalendar = "imperial";
      const IMPERIAL_EPOCH_DIFFERENCE = 1180;

      // Calendar descriptions
      const calendarDescriptions = {
        imperial:
          "تقویم شاهنشاهی از سال ۵۵۹ پیش از میلاد (تأسیس امپراتوری هخامنشی توسط کوروش کبیر) آغاز می‌شود و حدود ۱۱۸۰ سال از تقویم خورشیدی پیشتر است.",
        persian:
          "تقویم خورشیدی یا شمسی از هجرت محمد از مکه به مدینه (۶۲۲ میلادی) آغاز می‌شود و بر اساس حرکت زمین به دور خورشید محاسبه می‌شود.",
        hijri:
          "تقویم هجری قمری از هجرت محمد از مکه به مدینه (۶۲۲ میلادی) آغاز می‌شود و بر اساس حرکت ماه محاسبه می‌شود.",
        gregorian:
          "تقویم میلادی از تولد مسیح آغاز می‌شود و امروزه رایج‌ترین تقویم جهان است که بر اساس حرکت زمین به دور خورشید محاسبه می‌شود.",
        chinese:
          "تقویم چینی یک تقویم قمری-خورشیدی است که بر اساس چرخه‌های ماه و خورشید محاسبه می‌شود و سال‌ها با نام‌های حیوانی و عناصر مشخص می‌شوند.",
        hebrew:
          "تقویم عبری یک تقویم قمری-خورشیدی است که از زمان خلقت جهان (طبق سنت یهودی) محاسبه می‌شود و برای مناسبت‌های مذهبی یهودی استفاده می‌شود.",
        unix: "تایم‌استمپ یونیکس تعداد ثانیه‌های سپری شده از ۱ ژانویه ۱۹۷۰ را نشان می‌دهد.",
      };

      // Create floating particles
      function createParticles() {
        const particlesContainer = document.getElementById("particles");
        for (let i = 0; i < 50; i++) {
          const particle = document.createElement("div");
          particle.className = "particle";
          particle.style.left = Math.random() * 100 + "%";
          particle.style.animationDelay = Math.random() * 15 + "s";
          particle.style.animationDuration = Math.random() * 10 + 10 + "s";
          particlesContainer.appendChild(particle);
        }
      }

      // Convert to Persian numerals
      function toPersianNum(num) {
        const persianDigits = "۰۱۲۳۴۵۶۷۸۹";
        return num.toString().replace(/\d/g, (digit) => persianDigits[digit]);
      }

      // Format numeric date
      function formatNumericDate(date, calendar) {
        if (calendar === "unix") {
          return `ثانیه: ${toPersianNum(
            date.timestampSeconds
          )}<br>میلی‌ثانیه: ${toPersianNum(date.timestampMillis)}`;
        }
        const year = date.year.toString().padStart(4, "0");
        const month = date.month.toString().padStart(2, "0");
        const day = date.day.toString().padStart(2, "0");

        if (calendar === "persian" || calendar === "imperial") {
          return `${toPersianNum(year)}/${toPersianNum(month)}/${toPersianNum(
            day
          )}`;
        }
        return `${year}/${month}/${day}`;
      }

      // Format current time
      function formatCurrentTime() {
        const now = new Date();
        const hours = now.getHours().toString().padStart(2, "0");
        const minutes = now.getMinutes().toString().padStart(2, "0");
        const seconds = now.getSeconds().toString().padStart(2, "0");
        return `${toPersianNum(hours)}:${toPersianNum(minutes)}:${toPersianNum(
          seconds
        )}`;
      }

      // Update time display
      function updateTimeDisplay() {
        document.getElementById("currentTime").textContent =
          formatCurrentTime();
      }

      // Calculate time difference
      function calculateTimeDifference(targetDate) {
        const now = new Date();
        const target = new Date(
          targetDate.year,
          targetDate.month - 1,
          targetDate.day
        );

        const diffTime = target.getTime() - now.getTime();
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

        const isFuture = diffDays > 0;
        const absDays = Math.abs(diffDays);

        const years = Math.floor(absDays / 365);
        const months = Math.floor((absDays % 365) / 30);
        const days = absDays % 30;
        const hours = Math.floor(Math.abs(diffTime) / (1000 * 60 * 60)) % 24;

        return {
          years,
          months,
          days,
          hours,
          isFuture,
          totalDays: absDays,
        };
      }

      // Calendar conversion functions
      function gregorianToPersian(gYear, gMonth, gDay) {
        let pYear = gYear - 621;
        if (gMonth < 3 || (gMonth === 3 && gDay < 21)) {
          pYear--;
        }

        let pMonth, pDay;
        const springStart = new Date(gYear, 2, 21);
        const currentDate = new Date(gYear, gMonth - 1, gDay);
        const dayOfYear = Math.floor(
          (currentDate - springStart) / (1000 * 60 * 60 * 24)
        );

        if (dayOfYear < 0) {
          pYear--;
          const prevSpringStart = new Date(gYear - 1, 2, 21);
          const adjustedDayOfYear = Math.floor(
            (currentDate - prevSpringStart) / (1000 * 60 * 60 * 24)
          );
          [pMonth, pDay] = dayOfYearToPersianMonthDay(adjustedDayOfYear);
        } else {
          [pMonth, pDay] = dayOfYearToPersianMonthDay(dayOfYear);
        }

        return { year: pYear, month: pMonth, day: pDay };
      }

      function dayOfYearToPersianMonthDay(dayOfYear) {
        if (dayOfYear < 186) {
          const month = Math.floor(dayOfYear / 31) + 1;
          const day = (dayOfYear % 31) + 1;
          return [Math.min(month, 6), day];
        } else {
          const remainingDays = dayOfYear - 186;
          const month = Math.floor(remainingDays / 30) + 7;
          const day = (remainingDays % 30) + 1;
          return [Math.min(month, 12), Math.min(day, month === 12 ? 29 : 30)];
        }
      }

      function persianToGregorian(pYear, pMonth, pDay) {
        const gYear = pYear + 621;
        let dayOfYear = 0;
        if (pMonth <= 6) {
          dayOfYear = (pMonth - 1) * 31 + pDay - 1;
        } else {
          dayOfYear = 186 + (pMonth - 7) * 30 + pDay - 1;
        }

        const nowruz = new Date(gYear, 2, 21);
        const targetDate = new Date(
          nowruz.getTime() + dayOfYear * 24 * 60 * 60 * 1000
        );

        return {
          year: targetDate.getFullYear(),
          month: targetDate.getMonth() + 1,
          day: targetDate.getDate(),
        };
      }

      function persianToImperial(pYear, pMonth, pDay) {
        return {
          year: pYear + IMPERIAL_EPOCH_DIFFERENCE,
          month: pMonth,
          day: pDay,
        };
      }

      function imperialToPersian(iYear, iMonth, iDay) {
        return {
          year: iYear - IMPERIAL_EPOCH_DIFFERENCE,
          month: iMonth,
          day: iDay,
        };
      }

      function gregorianToImperial(gYear, gMonth, gDay) {
        const persian = gregorianToPersian(gYear, gMonth, gDay);
        return persianToImperial(persian.year, persian.month, persian.day);
      }

      function imperialToGregorian(iYear, iMonth, iDay) {
        const persian = imperialToPersian(iYear, iMonth, iDay);
        return persianToGregorian(persian.year, persian.month, persian.day);
      }

      function gregorianToHijri(gYear, gMonth, gDay) {
        const totalDays = Math.floor(
          (new Date(gYear, gMonth - 1, gDay) - new Date(622, 6, 16)) /
            (1000 * 60 * 60 * 24)
        );
        const hYear = Math.floor(totalDays / 354.367) + 1;
        const remainingDays = totalDays - Math.floor((hYear - 1) * 354.367);

        let hMonth = 1;
        let hDay = remainingDays;
        const monthDays = [30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29];

        for (let i = 0; i < 12; i++) {
          if (hDay <= monthDays[i]) {
            hMonth = i + 1;
            break;
          }
          hDay -= monthDays[i];
        }

        return {
          year: Math.max(1, hYear),
          month: hMonth,
          day: Math.max(1, hDay),
        };
      }

      function hijriToGregorian(hYear, hMonth, hDay) {
        const totalDays =
          Math.floor((hYear - 1) * 354.367) +
          [0, 30, 59, 89, 118, 148, 177, 207, 236, 266, 295, 325][hMonth - 1] +
          hDay -
          1;

        const hijriEpoch = new Date(622, 6, 16);
        const gDate = new Date(
          hijriEpoch.getTime() + totalDays * 24 * 60 * 60 * 1000
        );

        return {
          year: gDate.getFullYear(),
          month: gDate.getMonth() + 1,
          day: gDate.getDate(),
        };
      }

      function gregorianToChinese(gYear, gMonth, gDay) {
        // Approximate Chinese lunar calendar conversion
        // Using a simplified method based on lunar cycles
        const lunarEpoch = new Date(-2637, 1, 15); // Approx start of Chinese calendar
        const daysSinceEpoch = Math.floor(
          (new Date(gYear, gMonth - 1, gDay) - lunarEpoch) /
            (1000 * 60 * 60 * 24)
        );
        const lunarYear = Math.floor(daysSinceEpoch / 354.367) + 2637;
        const remainingDays = daysSinceEpoch % 354.367;
        let cMonth = Math.floor(remainingDays / 29.53) + 1;
        let cDay = Math.floor(remainingDays % 29.53) + 1;

        // Stem-branch and zodiac
        const stems = [
          "جیا",
          "یی",
          "بینگ",
          "دینگ",
          "وو",
          "جی",
          "گنگ",
          "شین",
          "رن",
          "گوی",
        ];
        const branches = [
          "زی",
          "چو",
          "یین",
          "مائو",
          "چن",
          "سی",
          "وو",
          "وی",
          "شن",
          "یو",
          "شو",
          "های",
        ];
        const zodiacs = [
          "موش",
          "گاو",
          "ببر",
          "خرگوش",
          "اژدها",
          "مار",
          "اسب",
          "بز",
          "میمون",
          "خروس",
          "سگ",
          "خوک",
        ];
        const yearIndex = (lunarYear - 4) % 60;
        const stemBranch = `${stems[yearIndex % 10]}-${
          branches[yearIndex % 12]
        }`;
        const zodiac = zodiacs[yearIndex % 12];

        return {
          year: lunarYear,
          month: Math.min(cMonth, 12),
          day: Math.min(cDay, 30),
          stemBranch,
          zodiac,
        };
      }

      function chineseToGregorian(cYear, cMonth, cDay) {
        // Approximate reverse conversion
        const lunarEpoch = new Date(-2637, 1, 15);
        const totalDays =
          (cYear - 2637) * 354.367 + (cMonth - 1) * 29.53 + (cDay - 1);
        const gDate = new Date(
          lunarEpoch.getTime() + totalDays * 24 * 60 * 60 * 1000
        );
        return {
          year: gDate.getFullYear(),
          month: gDate.getMonth() + 1,
          day: gDate.getDate(),
        };
      }

      function gregorianToHebrew(gYear, gMonth, gDay) {
        // Approximate Hebrew calendar conversion
        const hebrewEpoch = new Date(-3761, 9, 7); // Approx start of Hebrew calendar
        const daysSinceEpoch = Math.floor(
          (new Date(gYear, gMonth - 1, gDay) - hebrewEpoch) /
            (1000 * 60 * 60 * 24)
        );
        const hYear = Math.floor(daysSinceEpoch / 354.367) + 3761;
        const remainingDays = daysSinceEpoch % 354.367;
        let hMonth = Math.floor(remainingDays / 29.53) + 1;
        let hDay = Math.floor(remainingDays % 29.53) + 1;

        return {
          year: hYear,
          month: Math.min(hMonth, 13),
          day: Math.min(hDay, 30),
        };
      }

      function hebrewToGregorian(hYear, hMonth, hDay) {
        // Approximate reverse conversion
        const hebrewEpoch = new Date(-3761, 9, 7);
        const totalDays =
          (hYear - 3761) * 354.367 + (hMonth - 1) * 29.53 + (hDay - 1);
        const gDate = new Date(
          hebrewEpoch.getTime() + totalDays * 24 * 60 * 60 * 1000
        );
        return {
          year: gDate.getFullYear(),
          month: gDate.getMonth() + 1,
          day: gDate.getDate(),
        };
      }

      function unixToGregorian(timestamp) {
        const date = new Date(timestamp * 1000);
        return {
          year: date.getFullYear(),
          month: date.getMonth() + 1,
          day: date.getDate(),
        };
      }

      function gregorianToUnix(gYear, gMonth, gDay) {
        const date = new Date(gYear, gMonth - 1, gDay);
        return Math.floor(date.getTime() / 1000);
      }

      function getCurrentDate() {
        const now = new Date();
        const gDate = {
          year: now.getFullYear(),
          month: now.getMonth() + 1,
          day: now.getDate(),
        };
        const timestampSeconds = Math.floor(now.getTime() / 1000);
        const timestampMillis = now.getTime();

        const pDate = gregorianToPersian(gDate.year, gDate.month, gDate.day);
        const iDate = persianToImperial(pDate.year, pDate.month, pDate.day);
        const hDate = gregorianToHijri(gDate.year, gDate.month, gDate.day);
        const cDate = gregorianToChinese(gDate.year, gDate.month, gDate.day);
        const heDate = gregorianToHebrew(gDate.year, gDate.month, gDate.day);

        return {
          gregorian: gDate,
          persian: pDate,
          imperial: iDate,
          hijri: hDate,
          chinese: cDate,
          hebrew: heDate,
          unix: { timestampSeconds, timestampMillis },
        };
      }

      function formatDate(date, calendar) {
        if (calendar === "unix") {
          return `${toPersianNum(date.timestampSeconds)} ثانیه`;
        }
        if (calendar === "chinese") {
          return `${toPersianNum(date.day)} ${
            chineseMonths[date.month - 1]
          } ${toPersianNum(date.year)} (${date.stemBranch}, ${date.zodiac})`;
        }
        const months =
          calendar === "persian" || calendar === "imperial"
            ? persianMonths
            : calendar === "hijri"
            ? hijriMonths
            : calendar === "hebrew"
            ? hebrewMonths
            : calendar === "chinese"
            ? chineseMonths
            : gregorianMonths;

        let monthDisplay = months[date.month - 1];
        if (calendar === "gregorian") {
          monthDisplay = `${months[date.month - 1]} (${
            gregorianMonthsEnglish[date.month - 1]
          })`;
        }

        return `${toPersianNum(date.day)} ${monthDisplay} ${toPersianNum(
          date.year
        )}`;
      }

      function getPersianDayName(date) {
        const now = new Date(date.year, date.month - 1, date.day);
        const dayIndex = now.getDay();
        if (currentCalendar === "gregorian") {
          return `${persianDays[dayIndex]} (${englishDays[dayIndex]})`;
        }
        return persianDays[dayIndex];
      }

      function updateDisplay() {
        try {
          const dates = getCurrentDate();
          const currentDateData = dates[currentCalendar];

          document.getElementById("currentDate").textContent = formatDate(
            currentDateData,
            currentCalendar
          );
          document.getElementById("dateNumeric").innerHTML = formatNumericDate(
            currentDateData,
            currentCalendar
          );

          document.getElementById("dayName").textContent =
            currentCalendar === "unix" || currentCalendar === "chinese"
              ? ""
              : getPersianDayName(currentDateData);

          const calendarNames = {
            imperial: "تقویم شاهنشاهی",
            persian: "تقویم خورشیدی",
            hijri: "تقویم هجری قمری",
            gregorian: "تقویم میلادی",
            chinese: "تقویم چینی",
            hebrew: "تقویم عبری",
            unix: "تایم‌استمپ یونیکس",
          };

          document.getElementById("dateInfo").textContent =
            calendarNames[currentCalendar];
          document.getElementById("calendarDescription").textContent =
            calendarDescriptions[currentCalendar];

          const statusIcons = {
            imperial: "👑",
            persian: "☀️",
            hijri: "🌙",
            gregorian: "🌍",
            chinese: "🐉",
            hebrew: "✡️",
            unix: "⏱️",
          };
          document.getElementById(
            "statusText"
          ).textContent = `${statusIcons[currentCalendar]} ${calendarNames[currentCalendar]}`;
        } catch (error) {
          console.error("Error updating display:", error);
          document.getElementById("currentDate").textContent =
            "خطا در نمایش تاریخ";
        }
      }

      function switchCalendar(calendar) {
        currentCalendar = calendar;

        document.querySelectorAll(".nav-tab").forEach((btn) => {
          btn.classList.remove("active");
        });
        event.target.classList.add("active");

        updateDisplay();
      }

      function toggleInputFields() {
        const calendarType = document.getElementById("inputCalendar").value;
        const yearField = document.getElementById("yearField");
        const monthField = document.getElementById("monthField");
        const dayField = document.getElementById("dayField");
        const timestampField = document.getElementById("timestampField");

        if (calendarType === "unix") {
          yearField.style.display = "none";
          monthField.style.display = "none";
          dayField.style.display = "none";
          timestampField.style.display = "block";
        } else {
          yearField.style.display = "block";
          monthField.style.display = "block";
          dayField.style.display = "block";
          timestampField.style.display = "none";
        }
      }

      function convertDate() {
        const year = parseInt(document.getElementById("inputYear").value);
        const month = parseInt(document.getElementById("inputMonth").value);
        const day = parseInt(document.getElementById("inputDay").value);
        const timestamp = parseInt(
          document.getElementById("inputTimestamp").value
        );
        const inputCalendar = document.getElementById("inputCalendar").value;

        if (inputCalendar === "unix" && !timestamp) {
          alert("لطفاً تایم‌استمپ را وارد کنید");
          return;
        } else if (inputCalendar !== "unix" && (!year || !month || !day)) {
          alert("لطفاً تمام فیلدهای تاریخ را پر کنید");
          return;
        }

        try {
          let results = {};
          let gregorianDate = null;

          if (inputCalendar === "unix") {
            const gDate = unixToGregorian(timestamp);
            const pDate = gregorianToPersian(
              gDate.year,
              gDate.month,
              gDate.day
            );
            const iDate = persianToImperial(pDate.year, pDate.month, pDate.day);
            const hDate = gregorianToHijri(gDate.year, gDate.month, gDate.day);
            const cDate = gregorianToChinese(
              gDate.year,
              gDate.month,
              gDate.day
            );
            const heDate = gregorianToHebrew(
              gDate.year,
              gDate.month,
              gDate.day
            );
            results = {
              unix: {
                timestampSeconds: timestamp,
                timestampMillis: timestamp * 1000,
              },
              gregorian: gDate,
              persian: pDate,
              imperial: iDate,
              hijri: hDate,
              chinese: cDate,
              hebrew: heDate,
            };
            gregorianDate = gDate;
          } else if (inputCalendar === "imperial") {
            const pDate = imperialToPersian(year, month, day);
            const gDate = persianToGregorian(
              pDate.year,
              pDate.month,
              pDate.day
            );
            const hDate = gregorianToHijri(gDate.year, gDate.month, gDate.day);
            const cDate = gregorianToChinese(
              gDate.year,
              gDate.month,
              gDate.day
            );
            const heDate = gregorianToHebrew(
              gDate.year,
              gDate.month,
              gDate.day
            );
            const unixTimestamp = gregorianToUnix(
              gDate.year,
              gDate.month,
              gDate.day
            );
            results = {
              imperial: { year, month, day },
              persian: pDate,
              gregorian: gDate,
              hijri: hDate,
              chinese: cDate,
              hebrew: heDate,
              unix: {
                timestampSeconds: unixTimestamp,
                timestampMillis: unixTimestamp * 1000,
              },
            };
            gregorianDate = gDate;
          } else if (inputCalendar === "persian") {
            const iDate = persianToImperial(year, month, day);
            const gDate = persianToGregorian(year, month, day);
            const hDate = gregorianToHijri(gDate.year, gDate.month, gDate.day);
            const cDate = gregorianToChinese(
              gDate.year,
              gDate.month,
              gDate.day
            );
            const heDate = gregorianToHebrew(
              gDate.year,
              gDate.month,
              gDate.day
            );
            const unixTimestamp = gregorianToUnix(
              gDate.year,
              gDate.month,
              gDate.day
            );
            results = {
              persian: { year, month, day },
              imperial: iDate,
              gregorian: gDate,
              hijri: hDate,
              chinese: cDate,
              hebrew: heDate,
              unix: {
                timestampSeconds: unixTimestamp,
                timestampMillis: unixTimestamp * 1000,
              },
            };
            gregorianDate = gDate;
          } else if (inputCalendar === "hijri") {
            const gDate = hijriToGregorian(year, month, day);
            const pDate = gregorianToPersian(
              gDate.year,
              gDate.month,
              gDate.day
            );
            const iDate = persianToImperial(pDate.year, pDate.month, pDate.day);
            const cDate = gregorianToChinese(
              gDate.year,
              gDate.month,
              gDate.day
            );
            const heDate = gregorianToHebrew(
              gDate.year,
              gDate.month,
              gDate.day
            );
            const unixTimestamp = gregorianToUnix(
              gDate.year,
              gDate.month,
              gDate.day
            );
            results = {
              hijri: { year, month, day },
              gregorian: gDate,
              persian: pDate,
              imperial: iDate,
              chinese: cDate,
              hebrew: heDate,
              unix: {
                timestampSeconds: unixTimestamp,
                timestampMillis: unixTimestamp * 1000,
              },
            };
            gregorianDate = gDate;
          } else if (inputCalendar === "chinese") {
            const gDate = chineseToGregorian(year, month, day);
            const pDate = gregorianToPersian(
              gDate.year,
              gDate.month,
              gDate.day
            );
            const iDate = persianToImperial(pDate.year, pDate.month, pDate.day);
            const hDate = gregorianToHijri(gDate.year, gDate.month, gDate.day);
            const heDate = gregorianToHebrew(
              gDate.year,
              gDate.month,
              gDate.day
            );
            const unixTimestamp = gregorianToUnix(
              gDate.year,
              gDate.month,
              gDate.day
            );
            const cDate = gregorianToChinese(
              gDate.year,
              gDate.month,
              gDate.day
            );
            results = {
              chinese: cDate,
              gregorian: gDate,
              persian: pDate,
              imperial: iDate,
              hijri: hDate,
              hebrew: heDate,
              unix: {
                timestampSeconds: unixTimestamp,
                timestampMillis: unixTimestamp * 1000,
              },
            };
            gregorianDate = gDate;
          } else if (inputCalendar === "hebrew") {
            const gDate = hebrewToGregorian(year, month, day);
            const pDate = gregorianToPersian(
              gDate.year,
              gDate.month,
              gDate.day
            );
            const iDate = persianToImperial(pDate.year, pDate.month, pDate.day);
            const hDate = gregorianToHijri(gDate.year, gDate.month, gDate.day);
            const cDate = gregorianToChinese(
              gDate.year,
              gDate.month,
              gDate.day
            );
            const unixTimestamp = gregorianToUnix(
              gDate.year,
              gDate.month,
              gDate.day
            );
            results = {
              hebrew: { year, month, day },
              gregorian: gDate,
              persian: pDate,
              imperial: iDate,
              hijri: hDate,
              chinese: cDate,
              unix: {
                timestampSeconds: unixTimestamp,
                timestampMillis: unixTimestamp * 1000,
              },
            };
            gregorianDate = gDate;
          } else {
            const pDate = gregorianToPersian(year, month, day);
            const iDate = persianToImperial(pDate.year, pDate.month, pDate.day);
            const hDate = gregorianToHijri(year, month, day);
            const cDate = gregorianToChinese(year, month, day);
            const heDate = gregorianToHebrew(year, month, day);
            const unixTimestamp = gregorianToUnix(year, month, day);
            results = {
              gregorian: { year, month, day },
              persian: pDate,
              imperial: iDate,
              hijri: hDate,
              chinese: cDate,
              hebrew: heDate,
              unix: {
                timestampSeconds: unixTimestamp,
                timestampMillis: unixTimestamp * 1000,
              },
            };
            gregorianDate = { year, month, day };
          }

          displayResults(results);
          displayTimeDifference(gregorianDate);
        } catch (error) {
          alert("خطا در تبدیل تاریخ");
          console.error("Conversion error:", error);
        }
      }

      function displayResults(results) {
        const container = document.getElementById("conversionResults");
        container.innerHTML = "";

        const titles = {
          imperial: "شاهنشاهی",
          persian: "خورشیدی",
          hijri: "هجری قمری",
          gregorian: "میلادی",
          chinese: "چینی",
          hebrew: "عبری",
          unix: "یونیکس تایم‌استمپ",
        };

        Object.keys(results).forEach((calendar) => {
          const card = document.createElement("div");
          card.className = "result-card";

          card.innerHTML = `
                    <div class="result-title">${titles[calendar]}</div>
                    <div class="result-date persian-num">${formatDate(
                      results[calendar],
                      calendar
                    )}</div>
                    <div class="result-numeric">${formatNumericDate(
                      results[calendar],
                      calendar
                    )}</div>
                `;

          container.appendChild(card);
        });
      }

      function displayTimeDifference(gregorianDate) {
        const timeDiff = calculateTimeDifference(gregorianDate);
        const container = document.getElementById("timeDifference");

        let timeText = "";
        if (timeDiff.years > 0)
          timeText += `${toPersianNum(timeDiff.years)} سال، `;
        if (timeDiff.months > 0)
          timeText += `${toPersianNum(timeDiff.months)} ماه، `;
        if (timeDiff.days > 0)
          timeText += `${toPersianNum(timeDiff.days)} روز، `;
        timeText += `${toPersianNum(timeDiff.hours)} ساعت`;

        const statusText = timeDiff.isFuture ? "آینده" : "گذشته";
        const statusClass = timeDiff.isFuture
          ? "time-diff-future"
          : "time-diff-past";

        container.innerHTML = `
                <div class="time-diff-title">⏰ فاصله زمانی تا امروز</div>
                <div class="time-diff-content">
                    <span class="${statusClass}">${timeText}</span>
                    <br>
                    <strong class="${statusClass}">${statusText}</strong>
                </div>
            `;

        container.style.display = "block";
      }

      // Initialize
      document.addEventListener("DOMContentLoaded", function () {
        createParticles();
        updateDisplay();
        updateTimeDisplay();
        toggleInputFields();
        setInterval(updateDisplay, 1000);
        setInterval(updateTimeDisplay, 1000);
      });

      setTimeout(updateDisplay, 100);
    </script>
  </body>
</html>
